<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Nishanth Mane"><title>Unity3D: Understanding what Lerp does · Nishanth Mane</title><meta name="description" content="Why do we need Lerp in the first placeLinear Interpolation or Lerping is a way to change value smoothly over time between two values. You might say i "><meta name="keywords" content="Unity3D, OpenGL, gamedev, computer-graphics, programming"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/timelify/animate.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/low-poly-logo.jpg"><h3 title=""><a href="/">Nishanth Mane</a></h3><div class="description"><p>Write about daily coding experiences and game development.</p></div></div></div><ul class="social-links"><li><a href="https://www.linkedin.com/in/nishanth-mane-33065374"><i class="fa fa-linkedin"></i></a></li><li><a href="mailto:nishanth.engg93@gmail.com"><i class="fa fa-envelope"></i></a></li><li><a href="http://github.com/ngmgit"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by</span></a><a href="https://www.caicai.me"> CaiCai</a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li><li><a href="/about">About</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Unity3D: Understanding what Lerp does</a></h3></div><div class="post-content"><h2 id="Why-do-we-need-Lerp-in-the-first-place"><a href="#Why-do-we-need-Lerp-in-the-first-place" class="headerlink" title="Why do we need Lerp in the first place"></a>Why do we need Lerp in the first place</h2><p>Linear Interpolation or Lerping is a way to change value smoothly over time between two values. You might say i can do that by chaging the value by a certain speed by taking into account the deltaTime in the Update/FixedUpdate loop so why bother using the Lerp API.</p>
<p>Then you might say we can use <code>Transform.MoveTowards</code> API for this. And yes you are correct if you want the movement to have constant velocity and dont want to have any damping or smoothness or ease applied.</p>
<p>Ex: Moving a object and bring to halt smoothly but not abruptly.</p>
<p>Here is an example of a game i am working on with and without Lerp.<br><strong>Without Lerp:</strong> Notice how the new ball and the balls behind it are shifted instantly.</p>
<iframe src="https://gfycat.com/ifr/FoolishWhoppingBobolink" width="480px" height="320px" frameborder="0" allowfullscreen></iframe>
<p><strong>With Lerp:</strong> Here the new ball takes its position smoothhly and the balls behind are also moved in a smooth manner.</p>
<iframe src="https://gfycat.com/ifr/DescriptiveGiddyIbadanmalimbe" width="480px" height="320px" frameborder="0" allowfullscreen></iframe>
<h2 id="How-to-Lerp-in-Unity3D"><a href="#How-to-Lerp-in-Unity3D" class="headerlink" title="How to Lerp in Unity3D"></a>How to Lerp in Unity3D</h2><p>In Unity there are multiple Lerp API available to use but they all extend on <code>Mathf.Lerp</code>. Lerp takes 3 parameters start, end and percentage values.<br>For example to move a Unity GameObject from Postion A to B one can use Vector3.Lerp API.<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span>.transform.position = Vecto3.Lerp(A, B, t)</span><br></pre></td></tr></table></figure></p>
<p>Here <code>t</code> is the perentage variables which calculates the percentage of path to be traversed. It takes values from 0 to 1.</p>
<p>Read more at: <a href="https://docs.unity3d.com/ScriptReference/Vector3.Lerp.html" target="_blank" rel="noopener">https://docs.unity3d.com/ScriptReference/Vector3.Lerp.html</a></p>
<h2 id="What-is-actually-happening"><a href="#What-is-actually-happening" class="headerlink" title="What is actually happening"></a>What is actually happening</h2><p>The output of Lerp depends based on the following cases for each frame.</p>
<ul>
<li>Change only t value</li>
<li>Change of the parameter A or B or both</li>
<li>Change in all the values i.e A, B and t.</li>
</ul>
<p>So to clearly understand how lerp works lets dicuss these three cases. But i think the first case is very important to understand so read carefully.</p>
<h3 id="Case-1-Change-only-t-value"><a href="#Case-1-Change-only-t-value" class="headerlink" title="Case 1: Change only t value"></a>Case 1: Change only t value</h3><p>If you have read the official docs for Vector3.Lerp (link above) you can see the example provided calculates a new <code>t</code> value for each update. So the only parameter changing here is <code>t</code>. lets see how this effects the output.</p>

<div class="codeblock-scroll">

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ExampleClass</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Transforms to act as start and end markers for the journey.</span></span><br><span class="line">    <span class="keyword">public</span> Transform startMarker;</span><br><span class="line">    <span class="keyword">public</span> Transform endMarker;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Movement speed in units/sec.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">float</span> speed = <span class="number">1.0</span>F;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Time when the movement started.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> startTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Total distance between the markers.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> journeyLength;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// Keep a note of the time the movement started.</span></span><br><span class="line">        startTime = Time.time;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Calculate the journey length.</span></span><br><span class="line">        journeyLength = Vector3.Distance(startMarker.position, endMarker.position);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Follows the target position like with a spring</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// Distance moved = time * speed.</span></span><br><span class="line">        <span class="keyword">float</span> distCovered = (Time.time - startTime) * speed;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Fraction of journey completed = current distance divided by total distance.</span></span><br><span class="line">        <span class="keyword">float</span> fracJourney = distCovered / journeyLength;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set our position as a fraction of the distance between the markers.</span></span><br><span class="line">        transform.position = Vector3.Lerp(startMarker.position, endMarker.position, fracJourney);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div>

<p>source: <a href="https://docs.unity3d.com/ScriptReference/Vector3.Lerp.html" target="_blank" rel="noopener">https://docs.unity3d.com/ScriptReference/Vector3.Lerp.html</a></p>
<p>Here intially we set the time at which it starts <code>startTime</code>, total distance to travel <code>journeyLength</code>. Also note that the start and end positions are not changed. This initial information can be used to traverse the path between start and end points and set the <code>t</code> to one which will increase from 0 to 1 each frame. The faster your increment the value the faster you will reach the end position.</p>
<p>And one way of doing this is to calculate the ratio i.e journey distane of <code>distCovered</code> to total distance <code>journeyLength</code> at each frame which will be used as <code>t</code>. Lets take a simple example to understand this. Say we have two points in one dimenson at units 0 and units 10. And we want to lerp between these two points.</p>
<p>Here total distance is 10. Also lets assume that at each frame the <code>t</code> value is incrementd by 0.1 upon calculation. Which would mean 10%. So at each frame travel distance is incremented by 10% i.e 10% , 20% , 30% … 100%. But carefully note that <strong>in this case the percentage will be applied to the total distane but not to the remaining distance</strong>. This is the key point to observe here. This is beacuse we are not changing the starting point.</p>
<p>See below table to understand the progression for the above example for above mentioned <code>t</code> values.</p>
<p>here we have <code>t</code> , <code>t * totalDistance</code>, next positon for that frame</p>
<ul>
<li>0.1 =&gt; 0.1 * 10 =&gt; 1</li>
<li>0.1 =&gt; 0.2 * 10 =&gt; 2<br>.<br>.<br>.</li>
<li>0.9 =&gt; 0.9 * 10 =&gt; 9</li>
<li>1.0 -&gt; 1.0 * 10 =&gt; 10</li>
</ul>
<p>This can be easily mapped to the 2D and 3D Vectors. Just by assuming that the above points are (0,0) and (0,10) for 2D and (0,0,0) and (0,0,10).</p>
<p><strong>Different way to calculate t :</strong><br>Also <code>t</code> can be calculated in other ways too, say we want to complete the journey in a certain amount of time then we can have a function which calculates the <code>t</code> by taking ratio of <code>currentTime / targetTime</code>, where currentTime is initialized to <code>0</code> and each its set as <code>currentTime += Time.deltaTime</code>.</p>
<p>In the below code we want the journey to complete in 1 sec i.e <code>targetTime = 1</code>;</p>

<div class="codeblock-scroll">

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ExampleClass</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Transforms to act as start and end markers for the journey.</span></span><br><span class="line">    <span class="keyword">public</span> Transform startMarker;</span><br><span class="line">    <span class="keyword">public</span> Transform endMarker;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Move to the target in one sec.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">float</span> targetTime = <span class="number">1.0</span>F;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Total distance between the markers.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> currentTime;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// Marks the start time when the movement starts</span></span><br><span class="line">        currentTime = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Follows the target position like with a spring</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        currentTime += Time.deltaTime;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Fraction of journey completed = current distance divided by total distance.</span></span><br><span class="line">        <span class="keyword">float</span> timeFrac = currentTime / targetTime;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set our position as a fraction of the distance between the markers.</span></span><br><span class="line">        transform.position = Vector3.Lerp(startMarker.position, endMarker.position, timeFrac);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div>

<h3 id="Case-3-Change-parameter-A-or-B-or-both"><a href="#Case-3-Change-parameter-A-or-B-or-both" class="headerlink" title="Case 3: Change parameter A or B or both"></a>Case 3: Change parameter A or B or both</h3><p>I feel that most of the beginners starting with lerp might have used this way to Lerp and thus getting unexpected results.</p>
<p>Usually when a object is moved we set the start value i.e <code>A</code> to the current position of the object. Doing this will effectively change the position caclculated for the frame in which the <code>A</code> is changed because the <code>t</code> is already incremented and the calculation usually happens based on fixed start and end.</p>
<p>So if we have already travelled x distance from <code>A</code> and changed the start value from <code>A</code> to the current position then the next position calculated will be based on current Positon and <code>t</code> values.</p>
<p>To undestand this lets take the example from above.</p>
<p>Say after we get t = 0.2 the position is 2 and at this instant we set the A to 2.</p>
<p>Then we have a totalDistance value = 10 -2 = 8 but not 10.</p>
<p>So lets calculate the next position based on above changes at t= 0.3<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">at t = 0.3</span><br><span class="line">nextPos = t * remainingDistance = 0.3 * 8 = 2.4</span><br></pre></td></tr></table></figure></p>
<p>So the next positon will be incremented by 2.4 units.</p>
<p>Now lets check this value with that of the above case where start is not changed and totalDistance is still 10.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">at t =</span><br><span class="line">nextPos = t * totalDistance = 0.3 * 10 = 3</span><br></pre></td></tr></table></figure>
<p>So in this case when we changed the start value i.e <code>A</code> the calculation takes the remaining distance into consideration.</p>
<p>The same thing will happen if the end value <code>B</code> or both <code>A</code> and <code>B</code> are changed.</p>
<h3 id="Case-3-Change-all-the-parameters"><a href="#Case-3-Change-all-the-parameters" class="headerlink" title="Case 3: Change all the parameters"></a>Case 3: Change all the parameters</h3><p>What if you want to change the position and also get the results same as that of the case 1.<br>What can we do to get the value same as that of the case 1 even if we change the start <code>A</code> and end <code>B</code>.<br>We can do that by adjusting <code>t</code> value.</p>
<h2 id="What-more-can-be-done"><a href="#What-more-can-be-done" class="headerlink" title="What more can be done"></a>What more can be done</h2><p>By adjusting the <code>t</code> value one can produce ease results like the ones mentioned <a href="https://easings.net" target="_blank" rel="noopener">here</a>.</p>
<p>I hope this post was helpful to understand how lerp works and how the parameters effect the output.</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-10-10</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Programming/" title="Programming">Programming </a><a class="tag" href="/categories/Programming/Unity3D/" title="Unity3D">Unity3D </a><a class="tag" href="/tags/unity-3d/" title="unity-3d">unity-3d </a><a class="tag" href="/tags/c-sharp/" title="c#">c# </a><a class="tag" href="/tags/debug/" title="debug">debug </a><a class="tag" href="/tags/visual-studio/" title="visual-studio">visual-studio </a><a class="tag" href="/tags/maths/" title="maths">maths </a><a class="tag" href="/tags/game-dev/" title="game-dev">game-dev </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://ngmgit.github.com/2018/10/10/Unity3D-Understanding-what-Lerp-does/,Nishanth Mane,Unity3D: Understanding what Lerp does,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/10/06/Visual-Studio-Inspect-SortedDictionary-in-debugger-inspector/" title="Visual Studio: Inspect SortedDictionary in debugger inspector">next_post</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>