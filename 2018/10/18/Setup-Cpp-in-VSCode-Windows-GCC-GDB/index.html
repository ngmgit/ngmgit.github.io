<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Nishanth Mane"><title>Setup C++ in VSCode Windows: GCC + GDB Â· Nishanth Mane</title><meta name="description" content="Why I am writings thisI think a simple google search will show articles related to this but those were not helpful to me when i setup on my windows en"><meta name="keywords" content="Unity3D, OpenGL, gamedev, computer-graphics, programming"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/timelify/animate.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/alex-chiru-042718-env-color-02-ac.jpg"><h3 title=""><a href="/">Nishanth Mane</a></h3><div class="description"><p>Write about daily coding experiences and game development.</p></div></div></div><ul class="social-links"><li><a href="https://www.linkedin.com/in/nishanth-mane-33065374"><i class="fa fa-linkedin"></i></a></li><li><a href="mailto:nishanth.engg93@gmail.com"><i class="fa fa-envelope"></i></a></li><li><a href="http://github.com/ngmgit"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by</span></a><a href="https://www.caicai.me"> CaiCai</a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io" target="_blank">Proudly published with Hexo&#65281;</a></div><p>Copyright &#169; 2018  Nishanth Mane.</p></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/projects">Projects</a></li><li><a href="/about">About</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Setup C++ in VSCode Windows: GCC + GDB</a></h3></div><div class="post-content"><h3 id="Why-I-am-writings-this"><a href="#Why-I-am-writings-this" class="headerlink" title="Why I am writings this"></a>Why I am writings this</h3><p>I think a simple google search will show articles related to this but those were not helpful to me when i setup on my windows environment. Especially setting up the gdb debugger. Which throws the error <code>file not found</code> as <a href="https://github.com/Microsoft/vscode-cpptools/issues/1546#issuecomment-365368570" target="_blank" rel="noopener">here</a> and fixed it with <code>sourceFileMap</code> in <code>launch.json</code>.</p>
<p>And also this post can be a good way to archive my vscode setup for windows.</p>
<h3 id="Prepare-for-setup"><a href="#Prepare-for-setup" class="headerlink" title="Prepare for setup"></a>Prepare for setup</h3><p>Below is the list of things to be installed before we start setting up vscode.<br>1) MSYS2<br>2) GCC</p>
<p>So why are these two packages used? Firstly MSYS2 is required to install GCC. Also GCC can be installed in many other ways using cygwin or mingw.<br>Usually other tutorials suggest using cygwin or mingw but MSYS2 provides the minimal linux subsystem and also comes with pacman to install packages. Since i use pacman on my linux distro i was quite comfortable using this and think that others will feel the same.</p>
<ul>
<li>Get MSYS2 from here <a href="https://www.msys2.org/" target="_blank" rel="noopener">https://www.msys2.org/</a></li>
<li>Setup MSYS2, install the packages as show in the instruction on the home page and also set any environment variables if mentioned.</li>
<li>Make sure the packages below are installed using pacman.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">base-devel</span><br><span class="line">msys2-devel</span><br><span class="line">mingw-w64-i686-toolchain</span><br><span class="line">mingw-w64-x86_64-toolchain</span><br></pre></td></tr></table></figure>
<ul>
<li>If you have installed <code>mingw-w64-i686-toolchain</code> or <code>mingw-w64-x86_64-toolchain</code> then gcc will be included in that package.</li>
</ul>
<p>Now that the requird packages are installed lets set the various config files required to make use of <code>g++</code> and <code>gdb</code> in vscode.</p>
<h3 id="Setup-VSCode"><a href="#Setup-VSCode" class="headerlink" title="Setup VSCode"></a>Setup VSCode</h3><p>To setup vscode to work with C++ we need to make sure the standard include paths are set for intellisense.<br>Build tasks is setup which uses g++ from the installed GCC package.<br>Debugger has to be setup in the <code>launch.json</code> file.</p>
<h4 id="Setup-include-paths-for-intellisense"><a href="#Setup-include-paths-for-intellisense" class="headerlink" title="Setup include paths for intellisense"></a>Setup include paths for intellisense</h4><ul>
<li>On installing GCC the standard header files are available in the directory <code>&lt;MSYS2_DIR&gt;/mingw64/include/c++/</code>.</li>
<li>These are to be setup in the <code>c_cpp_properties.json</code>.</li>
<li>A default config can be generated using the command palette <code>CTRL + Shift + P</code> and selecting <code>C/Cpp: Select a configuration</code> by typing in the selection box.</li>
<li>The generated config is placed in <code>.vscode</code> folder in the roor directory.</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Win32"</span>,</span><br><span class="line">            <span class="attr">"includePath"</span>: [</span><br><span class="line">                <span class="string">"$&#123;workspaceFolder&#125;/**"</span>,</span><br><span class="line">                <span class="string">"C:/msys64/mingw64/include/c++/8.2.0"</span>,</span><br><span class="line">                <span class="string">"C:/msys64/mingw64/include/c++/8.2.0/x86_64-w64-mingw32"</span>,</span><br><span class="line">                <span class="string">"C:/msys64/mingw64/include/c++/8.2.0/backward"</span>,</span><br><span class="line">                <span class="string">"C:/msys64/mingw64/lib/gcc/x86_64-w64-mingw32/8.2.0/include"</span>,</span><br><span class="line">                <span class="string">"C:/msys64/mingw64/lib/gcc/x86_64-w64-mingw32/8.2.0/include-fixed"</span></span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"browse"</span>: &#123;</span><br><span class="line">                <span class="attr">"path"</span>: [</span><br><span class="line">                    <span class="string">"$&#123;workspaceFolder&#125;/**"</span>,</span><br><span class="line">                    <span class="string">"C:/msys64/mingw64/include/c++/8.2.0"</span>,</span><br><span class="line">                    <span class="string">"C:/msys64/mingw64/include/c++/8.2.0/x86_64-w64-mingw32"</span>,</span><br><span class="line">                    <span class="string">"C:/msys64/mingw64/include/c++/8.2.0/backward"</span>,</span><br><span class="line">                    <span class="string">"C:/msys64/mingw64/lib/gcc/x86_64-w64-mingw32/8.2.0/include"</span>,</span><br><span class="line">                    <span class="string">"C:/msys64/mingw64/lib/gcc/x86_64-w64-mingw32/8.2.0/include-fixed"</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"defines"</span>: [</span><br><span class="line">                <span class="string">"_DEBUG"</span>,</span><br><span class="line">                <span class="string">"UNICODE"</span>,</span><br><span class="line">                <span class="string">"_UNICODE"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"compilerPath"</span>: <span class="string">"C:/msys64/mingw64/bin/g++"</span>,</span><br><span class="line">            <span class="attr">"cStandard"</span>: <span class="string">"c11"</span>,</span><br><span class="line">            <span class="attr">"cppStandard"</span>: <span class="string">"c++17"</span>,</span><br><span class="line">            <span class="attr">"intelliSenseMode"</span>: <span class="string">"clang-x64"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"version"</span>: <span class="number">4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Setup-Build-tasks"><a href="#Setup-Build-tasks" class="headerlink" title="Setup Build tasks"></a>Setup Build tasks</h4><p>Similar to the above scenario if there is no <code>tasks.json</code> generate one from the command palette by selecting <code>Tasks: Configure Task</code>.<br>As per my use case i want to compile the current file active in the editor, to achieve this iam using <code>${file}</code> variable provided by vscode config variables.<br>Also here <code>${filebasenameNoExtension}</code> is used to set the output for the compile file without any extension.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    // See https://go.microsoft.com/fwlink/?LinkId=733558</span><br><span class="line">    // for the documentation about the tasks.json format</span><br><span class="line">    "version": "2.0.0",</span><br><span class="line">    "tasks": [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"Build Current File"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">            <span class="attr">"command"</span>: <span class="string">"C:/msys64/mingw64/bin/g++"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [</span><br><span class="line">                // Ask msbuild to generate full paths for file names.</span><br><span class="line">                <span class="string">"-g"</span>,</span><br><span class="line">                <span class="string">"-Wshadow"</span>,</span><br><span class="line">                <span class="string">"-Wall"</span>,</span><br><span class="line">                <span class="string">"-Wextra"</span>,</span><br><span class="line">                <span class="string">"-std=c++17"</span>,</span><br><span class="line">                <span class="string">"-o"</span>,</span><br><span class="line">                <span class="string">"$&#123;fileBasenameNoExtension&#125;"</span>,</span><br><span class="line">                <span class="string">"'$&#123;file&#125;'"</span>,</span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"group"</span>: <span class="string">"build"</span>,</span><br><span class="line">            <span class="attr">"presentation"</span>: &#123;</span><br><span class="line">                // Reveal the output only if unrecognized errors occur.</span><br><span class="line">                "reveal": "silent"</span><br><span class="line">            &#125;,</span><br><span class="line">            // Use the standard MS compiler pattern to detect errors, warnings and infos</span><br><span class="line">            "problemMatcher": &#123;</span><br><span class="line">                "base": "$gcc",</span><br><span class="line">                "fileLocation": "absolute"</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Setup-Debugger-using-gdb"><a href="#Setup-Debugger-using-gdb" class="headerlink" title="Setup Debugger using gdb"></a>Setup Debugger using gdb</h4><p>To setup debugger the <code>program</code> and the <code>miDebuggerPath</code> is the important values to configured properly.</p>
<ul>
<li>It is set in such a way that the debugger gets the name of the compiled file of the current active tab in the editor.</li>
<li>Also here for some reason the path was set incorrectly so i had to use <code>sourceFileMap</code>.</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    // Use IntelliSense to learn about possible attributes.</span><br><span class="line">    // Hover to view descriptions of existing attributes.</span><br><span class="line">    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span><br><span class="line">    "version": "0.2.0",</span><br><span class="line">    "configurations": [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"(gdb) Launch"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"cppdbg"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/$&#123;fileBasenameNoExtension&#125;"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [],</span><br><span class="line">            <span class="attr">"stopAtEntry"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>,</span><br><span class="line">            <span class="attr">"environment"</span>: [],</span><br><span class="line">            <span class="attr">"externalConsole"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">"MIMode"</span>: <span class="string">"gdb"</span>,</span><br><span class="line">            <span class="attr">"miDebuggerPath"</span>: <span class="string">"C:/msys64/usr/bin/gdb.exe"</span>,</span><br><span class="line">            <span class="attr">"setupCommands"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">                    <span class="attr">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                    <span class="attr">"ignoreFailures"</span>: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"sourceFileMap"</span>: &#123;</span><br><span class="line">                <span class="attr">"/g"</span>: <span class="string">"G:/"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="How-to-use-this-setup"><a href="#How-to-use-this-setup" class="headerlink" title="How to use this setup"></a>How to use this setup</h3><p>The config for build and debug is configured in such a way that it uses the filename of the current active file in the editor.<br>So when a build task is run the file to be compiled will be fetched from ${file} variable provided by vscode.<br>Similarly for gdb the compiled files for current open file is fetched from ${fileBasenameNoExtension} since the -o flag was set with that in the <code>tasks.json</code></p>
<ul>
<li>To run the compile tasks open command palette and select <code>Tasks: Run Task</code> and select the Build tasks or name given in the taks.json say <code>&quot;label&quot;: &quot;Build Current File&quot;</code> in current setup.</li>
<li>After build is finished successfully goto the debug section and run debug, but make sure the current active file is the one you want to debug.</li>
</ul>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-10-18</span><i class="fa fa-comment-o"></i><a href="/2018/10/18/Setup-Cpp-in-VSCode-Windows-GCC-GDB/#comments">Comments</a><i class="fa fa-tag"></i><a class="tag" href="/categories/Programming/" title="Programming">Programming </a><a class="tag" href="/categories/Programming/c-plus-plus/" title="C++">C++ </a><a class="tag" href="/tags/vscode/" title="vscode">vscode </a><a class="tag" href="/tags/c-plus-plus/" title="c++">c++ </a><a class="tag" href="/tags/editor/" title="editor">editor </a><a class="tag" href="/tags/mingw/" title="mingw">mingw </a><a class="tag" href="/tags/gcc/" title="gcc">gcc </a><a class="tag" href="/tags/gdb/" title="gdb">gdb </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="http://www.evernote.com/clip.action?url=http://ngmgit.github.com/2018/10/18/Setup-Cpp-in-VSCode-Windows-GCC-GDB/&amp;t=Setup C++ in VSCode Windows: GCC + GDB"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/share?text=Setup C++ in VSCode Windows: GCC + GDB&amp;url=http://ngmgit.github.com/2018/10/18/Setup-Cpp-in-VSCode-Windows-GCC-GDB/"></a></div><div class="linked-in"><a class="fa fa-linkedin" href="https://www.linkedin.com/shareArticle?url=http://ngmgit.github.com/2018/10/18/Setup-Cpp-in-VSCode-Windows-GCC-GDB/&amp;mini=true&amp;title=Setup C++ in VSCode Windows: GCC + GDB"></a></div><div class="reddit"><a class="fa fa-reddit" href="http://www.reddit.com/submit?url=http://ngmgit.github.com/2018/10/18/Setup-Cpp-in-VSCode-Windows-GCC-GDB/&amp;title=Setup C++ in VSCode Windows: GCC + GDB"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2018/12/05/Practical-OOP-Simple-Polymorphism-to-avoid-duplicate-code/" title="Practical OOP - Simple Polymorphism to avoid duplicate code">prev_post</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/10/10/Unity3D-Understanding-what-Lerp-does/" title="Unity3D: Understanding what Lerp does">next_post</a></li></ul></div><a id="comments"></a><div id="disqus_thread"></div><script>var disqus_shortname = 'ngmgit-github-io';
var disqus_identifier = '2018/10/18/Setup-Cpp-in-VSCode-Windows-GCC-GDB/';
var disqus_title = 'Setup C++ in VSCode Windows: GCC + GDB';
var disqus_url = 'http://ngmgit.github.com/2018/10/18/Setup-Cpp-in-VSCode-Windows-GCC-GDB/';

var disqus_config = function() {
    this.page.url = disqus_url;
    this.page.identifier = disqus_identifier;
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//ngmgit-github-io.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script><script id="dsq-count-scr" src="//ngmgit-github-io.disqus.com/count.js" async></script></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>